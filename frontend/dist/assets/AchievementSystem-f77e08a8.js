import{r as u,b as V,j as e,c as X,A as Z}from"./index-7bec8ce1.js";const te=({achievements:h,attributes:E,onTitleChange:W,selectedTitles:q,events:S,onAddCustomAchievement:L,onAddCustomTitle:z,onAddCustomBadge:I})=>{const[d,m]=u.useState("all"),[n,w]=u.useState("achievement"),[U,j]=u.useState(!1),[G,v]=u.useState(!1),[O,N]=u.useState(!1),[s,x]=u.useState({title:"",description:"",icon:"🏆",triggerType:"manual",triggerCondition:"",useMarkdown:!1}),[l,b]=u.useState({title:"",description:"",icon:"🥇",attributeRequirement:"int",levelRequirement:5,useMarkdown:!1}),[a,f]=u.useState({title:"",description:"",icon:"🎖️",useMarkdown:!1}),P=u.useMemo(()=>{const t=new Date,r=new Date(t);r.setDate(t.getDate()-6);const i=S.filter(g=>{const y=new Date(g.timestamp);return y>=r&&y<=t});let c=0;const o={int:0,str:0,vit:0,cha:0,eq:0,cre:0};return i.forEach(g=>{g.expGains&&Object.entries(g.expGains).forEach(([y,F])=>{o.hasOwnProperty(y)&&(o[y]+=F),c+=F})}),{totalExpGain:c,attributeGains:o,eventCount:i.length}},[S]),p=u.useMemo(()=>[...V.map(r=>{const i=Z[r];return{id:`${i.name.toLowerCase()}-enthusiast`,title:`${i.name}爱好者`,description:`你在${i.name}方面表现出浓厚兴趣！`,icon:i.icon,condition:`${i.name}属性经验值 ≥ 50`,unlocked:!1}}),{id:"beginner",title:"初入江湖",description:"刚刚起步，未来可期！",icon:"🌱",condition:"总经验值 ≥ 100",unlocked:!1},{id:"explorer",title:"探索者",description:"继续探索，发现更多可能！",icon:"🔍",condition:"总经验值 ≥ 500",unlocked:!1},{id:"veteran",title:"资深玩家",description:"你已经积累了不少经验！",icon:"🏆",condition:"总经验值 ≥ 1000",unlocked:!1},{id:"well-rounded",title:"全能战士",description:"你全面发展，没有短板！",icon:"🏅",condition:"所有属性经验值 ≥ 10",unlocked:!1},{id:"breakthrough",title:"突破自我",description:"恭喜你，又一次超越了自己！",icon:"🌟",condition:"任意单个属性经验值 ≥ 200",unlocked:!1}],[P]),R=u.useMemo(()=>{switch(d){case"unlocked":return p.filter(t=>t.unlocked);case"locked":return p.filter(t=>!t.unlocked);default:return p}},[p,d]),D=u.useMemo(()=>{let t=h;switch(n){case"achievement":t=t.filter(r=>!r.isTitle);break;case"title":t=t.filter(r=>r.isTitle);break;case"badge":return[]}switch(d){case"unlocked":return t.filter(r=>r.unlockedAt!==null);case"locked":return t.filter(r=>r.unlockedAt===null);default:return t}},[h,d,n]),k=h.filter(t=>t.unlockedAt&&!t.isTitle).length,C=h.filter(t=>!t.isTitle).length,T=h.filter(t=>t.isTitle&&t.unlockedAt).length,M=h.filter(t=>t.isTitle).length,$=p.filter(t=>t.unlocked).length,A=p.length,_=t=>{const r=[...q],i=r.indexOf(t);i>=0?r.splice(i,1):r.length<2?r.push(t):r[0]=t,W(r)},B=t=>({int:"智力",str:"体魄",vit:"精力",cha:"社交",eq:"情感",cre:"创造"})[t]||t,Y=t=>{if(!t.isCustom||!t.triggerType)return"";switch(t.triggerType){case"level":if(t.triggerCondition){const[r,i]=t.triggerCondition.split(":");return`当${B(r)}达到${i}级时解锁`}return"";case"events":return`记录${t.triggerCondition}个事件后解锁`;case"keyword":return`记录包含关键词"${t.triggerCondition}"的事件后解锁`;case"streak":return`连续${t.triggerCondition}天记录事件后解锁`;case"manual":return"手动解锁的成就";default:return t.triggerCondition||""}},H=(t,r=!1)=>r?e.jsx("div",{className:"markdown-content",children:t.split(`
`).map((i,c)=>e.jsx("p",{className:"mb-2",children:i.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").split(/(<strong>.*?<\/strong>|<em>.*?<\/em>|<code>.*?<\/code>)/g).map((o,g)=>o.startsWith("<strong>")&&o.endsWith("</strong>")?e.jsx("strong",{children:o.slice(8,-9)},g):o.startsWith("<em>")&&o.endsWith("</em>")?e.jsx("em",{children:o.slice(4,-5)},g):o.startsWith("<code>")&&o.endsWith("</code>")?e.jsx("code",{children:o.slice(6,-7)},g):o)},c))}):t,J=()=>{s.title.trim()&&(L({title:s.title,description:s.description,icon:s.icon,isCustom:!0,triggerType:s.triggerType,triggerCondition:s.triggerCondition,progress:0,target:s.triggerType==="events"?parseInt(s.triggerCondition)||10:s.triggerType==="streak"?parseInt(s.triggerCondition)||3:s.triggerType==="level"?1:void 0,useMarkdown:s.useMarkdown}),x({title:"",description:"",icon:"🏆",triggerType:"manual",triggerCondition:"",useMarkdown:!1}),j(!1))},K=()=>{l.title.trim()&&(z({title:l.title,description:l.description,icon:l.icon,isCustom:!0,isTitle:!0,triggerType:"level",triggerCondition:`${String(l.attributeRequirement)}:${l.levelRequirement}`,attributeRequirement:l.attributeRequirement,levelRequirement:l.levelRequirement,useMarkdown:l.useMarkdown}),b({title:"",description:"",icon:"🥇",attributeRequirement:"int",levelRequirement:5,useMarkdown:!1}),v(!1))},Q=()=>{a.title.trim()&&(I({title:a.title,description:a.description,icon:a.icon,isCustom:!0,useMarkdown:a.useMarkdown}),f({title:"",description:"",icon:"🎖️",useMarkdown:!1}),N(!1))};return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"我的成就星碑"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[C>0?Math.round(k/C*100):0,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"成就解锁程度"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[k,"已解锁 / ",C-k,"未解锁"]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[M>0?Math.round(T/M*100):0,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"称号解锁程度"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[T,"已解锁 / ",M-T,"未解锁"]})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[A>0?Math.round($/A*100):0,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"徽章解锁程度"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[$,"已解锁 / ",A-$,"未解锁"]})]})]}),e.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[e.jsx("button",{onClick:()=>{w("achievement"),m("all")},className:`py-2 px-4 text-sm font-medium ${n==="achievement"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"成就"}),e.jsx("button",{onClick:()=>{w("title"),m("all")},className:`py-2 px-4 text-sm font-medium ${n==="title"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"称号"}),e.jsx("button",{onClick:()=>{w("badge"),m("all")},className:`py-2 px-4 text-sm font-medium ${n==="badge"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"徽章"})]}),n!=="badge"&&e.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[e.jsx("button",{onClick:()=>m("all"),className:`py-2 px-4 text-sm font-medium ${d==="all"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"全部"}),e.jsx("button",{onClick:()=>m("unlocked"),className:`py-2 px-4 text-sm font-medium ${d==="unlocked"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"已解锁"}),e.jsx("button",{onClick:()=>m("locked"),className:`py-2 px-4 text-sm font-medium ${d==="locked"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"未解锁"}),e.jsxs("button",{onClick:()=>{n==="achievement"?j(!0):n==="title"&&v(!0)},className:"ml-auto py-2 px-4 text-sm font-medium text-blue-600 hover:text-blue-800",children:["+ 添加自定义",n==="achievement"?"成就":"称号"]})]}),n==="badge"&&e.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[e.jsx("button",{onClick:()=>m("all"),className:`py-2 px-4 text-sm font-medium ${d==="all"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"全部"}),e.jsx("button",{onClick:()=>m("unlocked"),className:`py-2 px-4 text-sm font-medium ${d==="unlocked"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"已解锁"}),e.jsx("button",{onClick:()=>m("locked"),className:`py-2 px-4 text-sm font-medium ${d==="locked"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"未解锁"}),e.jsx("button",{onClick:()=>N(!0),className:"ml-auto py-2 px-4 text-sm font-medium text-blue-600 hover:text-blue-800",children:"+ 添加自定义徽章"})]}),n==="badge"?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"七日总结徽章"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"徽章根据您最近七天的表现自动生成，每天更新。"})]}),R.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:d==="unlocked"?"暂无已解锁徽章":d==="locked"?"暂无未解锁徽章":"暂无徽章"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:d==="unlocked"?"继续努力，解锁更多徽章":d==="locked"?"继续保持，争取解锁更多徽章":"根据您的活动表现，暂无匹配的徽章"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.map(t=>e.jsx("div",{className:`border rounded-lg p-4 ${t.unlocked?"bg-white border-gray-200":"bg-gray-50 border-gray-100"}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center ${t.unlocked?"bg-yellow-100 text-yellow-600":"bg-gray-200 text-gray-400"}`,children:e.jsx("div",{className:"text-xl",children:t.icon})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("h3",{className:`font-medium ${t.unlocked?"text-gray-900":"text-gray-500"}`,children:t.title})}),e.jsx("div",{className:`mt-1 text-sm ${t.unlocked?"text-gray-500":"text-gray-400"}`,children:t.description}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["触发条件: ",t.condition]}),t.unlocked&&e.jsx("div",{className:"mt-2 text-xs text-green-600 font-medium",children:"已解锁"})]})]})},t.id))})]}):D.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:n==="title"?"暂无称号":"暂无成就"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:d==="locked"?"继续努力，解锁更多"+(n==="title"?"称号":"成就"):n==="title"?"提升属性等级以解锁称号":"开始记录事件以解锁成就"}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:()=>{n==="achievement"?j(!0):n==="title"&&v(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:["创建第一个自定义",n==="achievement"?"成就":"称号"]})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:D.map(t=>{const r=X(t,E,[]),i=q.includes(t.id),c=!!t.unlockedAt,o=Y(t);return e.jsx("div",{className:`border rounded-lg p-4 ${c?"bg-white border-gray-200":"bg-gray-50 border-gray-100"}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center ${c?"bg-yellow-100 text-yellow-600":"bg-gray-200 text-gray-400"}`,children:t.icon?e.jsx("div",{className:"text-xl",children:t.icon}):e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("h3",{className:`font-medium ${c?"text-gray-900":"text-gray-500"}`,children:[t.title,t.isTitle&&t.attributeRequirement&&e.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:["称号-",B(t.attributeRequirement)]}),t.isTitle&&!t.attributeRequirement&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"称号"}),t.isCustom&&e.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["自我",n==="title"?"称号":n==="achievement"?"成就":"徽章"]}),!t.isCustom&&!t.isTitle&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"内置成就"}),!t.isCustom&&t.isTitle&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"内置称号"})]}),c&&t.isTitle&&e.jsx("button",{onClick:()=>_(t.id),className:`text-xs px-2 py-1 rounded ${i?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:i?"已选择":"选择"})]}),e.jsx("div",{className:`mt-1 text-sm ${c?"text-gray-500":"text-gray-400"}`,children:H(t.description,t.useMarkdown)}),t.isCustom&&o&&e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["触发条件: ",o]}),!c&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[e.jsx("span",{children:"进度"}),e.jsxs("span",{children:[Math.round(r),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full",style:{width:`${r}%`}})})]}),c&&t.unlockedAt&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["解锁于 ",new Date(t.unlockedAt).toLocaleDateString("zh-CN")]})]})]})},t.id)})}),U&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-10 sm:top-20 mx-auto p-4 sm:p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"添加自定义成就"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"名称"}),e.jsx("input",{type:"text",value:s.title,onChange:t=>x({...s,title:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"描述"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"achievement-markdown",checked:s.useMarkdown,onChange:t=>x({...s,useMarkdown:t.target.checked}),className:"h-4 w-4 text-blue-600 rounded"}),e.jsx("label",{htmlFor:"achievement-markdown",className:"ml-1 text-sm text-gray-600",children:"使用Markdown"})]})]}),e.jsx("textarea",{value:s.description,onChange:t=>x({...s,description:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3}),s.useMarkdown&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"支持 **粗体**、*斜体*、`代码` 等基本Markdown语法"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"图标"}),e.jsx("input",{type:"text",value:s.icon,onChange:t=>x({...s,icon:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"输入emoji或字符"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"触发类型"}),e.jsxs("select",{value:s.triggerType,onChange:t=>x({...s,triggerType:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"manual",children:"手动解锁"}),e.jsx("option",{value:"level",children:"属性等级"}),e.jsx("option",{value:"events",children:"事件数量"}),e.jsx("option",{value:"keyword",children:"关键词匹配"}),e.jsx("option",{value:"streak",children:"连续记录天数"})]})]}),s.triggerType!=="manual"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s.triggerType==="level"&&"属性及等级要求",s.triggerType==="events"&&"事件数量",s.triggerType==="keyword"&&"关键词",s.triggerType==="streak"&&"连续天数"]}),s.triggerType==="level"?e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("select",{value:String(s.triggerCondition.split(":")[0]||"int"),onChange:t=>x({...s,triggerCondition:t.target.value+":"+(s.triggerCondition.split(":")[1]||"5")}),className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:["int","str","vit","cha","eq","cre"].map(t=>e.jsx("option",{value:t,children:{int:"智力",str:"体魄",vit:"精力",cha:"社交",eq:"情感",cre:"创造"}[t]},t))}),e.jsx("input",{type:"number",min:"1",value:s.triggerCondition.split(":")[1]||"5",onChange:t=>x({...s,triggerCondition:(s.triggerCondition.split(":")[0]||"int")+":"+t.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}):e.jsx("input",{type:"text",value:s.triggerCondition,onChange:t=>x({...s,triggerCondition:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:s.triggerType==="events"?"例如: 10":s.triggerType==="keyword"?"例如: 学习":s.triggerType==="streak"?"例如: 7":""})]})]}),e.jsxs("div",{className:"mt-5 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>j(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50",children:"取消"}),e.jsx("button",{onClick:J,className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"添加"})]})]})})}),G&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-10 sm:top-20 mx-auto p-4 sm:p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"添加自定义称号"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"名称"}),e.jsx("input",{type:"text",value:l.title,onChange:t=>b({...l,title:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"描述"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"title-markdown",checked:l.useMarkdown,onChange:t=>b({...l,useMarkdown:t.target.checked}),className:"h-4 w-4 text-blue-600 rounded"}),e.jsx("label",{htmlFor:"title-markdown",className:"ml-1 text-sm text-gray-600",children:"使用Markdown"})]})]}),e.jsx("textarea",{value:l.description,onChange:t=>b({...l,description:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3}),l.useMarkdown&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"支持 **粗体**、*斜体*、`代码` 等基本Markdown语法"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"图标"}),e.jsx("input",{type:"text",value:l.icon,onChange:t=>b({...l,icon:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"输入emoji或字符"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"属性要求"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("select",{value:String(l.attributeRequirement),onChange:t=>b({...l,attributeRequirement:t.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:["int","str","vit","cha","eq","cre"].map(t=>e.jsx("option",{value:t,children:{int:"智力",str:"体魄",vit:"精力",cha:"社交",eq:"情感",cre:"创造"}[t]},t))}),e.jsx("input",{type:"number",min:"1",value:l.levelRequirement,onChange:t=>b({...l,levelRequirement:parseInt(t.target.value)||5}),className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{className:"mt-5 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>v(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50",children:"取消"}),e.jsx("button",{onClick:K,className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"添加"})]})]})})}),O&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-10 sm:top-20 mx-auto p-4 sm:p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"添加自定义徽章"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"名称"}),e.jsx("input",{type:"text",value:a.title,onChange:t=>f({...a,title:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"描述"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"badge-markdown",checked:a.useMarkdown,onChange:t=>f({...a,useMarkdown:t.target.checked}),className:"h-4 w-4 text-blue-600 rounded"}),e.jsx("label",{htmlFor:"badge-markdown",className:"ml-1 text-sm text-gray-600",children:"使用Markdown"})]})]}),e.jsx("textarea",{value:a.description,onChange:t=>f({...a,description:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3}),a.useMarkdown&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"支持 **粗体**、*斜体*、`代码` 等基本Markdown语法"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"图标"}),e.jsx("input",{type:"text",value:a.icon,onChange:t=>f({...a,icon:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"输入emoji或字符"})]})]}),e.jsxs("div",{className:"mt-5 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>N(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50",children:"取消"}),e.jsx("button",{onClick:Q,className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"添加"})]})]})})})]})};export{te as default};
