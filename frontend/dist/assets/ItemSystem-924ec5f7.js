import{r as b,j as e}from"./index-ff32a15b.js";const g={int:{name:"æ™ºåŠ›",icon:"book-open",color:"var(--int-color)"},str:{name:"ä½“é­„",icon:"dumbbell",color:"var(--str-color)"},vit:{name:"ç²¾åŠ›",icon:"battery",color:"var(--vit-color)"},cha:{name:"ç¤¾äº¤",icon:"users",color:"var(--cha-color)"},eq:{name:"æƒ…æ„Ÿ",icon:"heart",color:"var(--eq-color)"},cre:{name:"åˆ›é€ ",icon:"palette",color:"var(--cre-color)"}};function R({items:y,onAddItem:E,onUseItem:j,onUndoUseItem:v,onUpdateItem:N,attributeNames:A={}}){const[D,p]=b.useState(!1),[r,u]=b.useState(null),[I,m]=b.useState(!1),[l,a]=b.useState(null),[n,d]=b.useState({name:"",description:"",icon:"ðŸŽ",type:"consumable",effects:[]}),S={...g,...A},[i,f]=b.useState({attribute:"int",type:"fixed",value:10}),q=()=>{n.name.trim()&&(E(n),d({name:"",description:"",icon:"ðŸŽ",type:"consumable",effects:[]}),p(!1))},L=()=>{d({...n,effects:[...n.effects,{...i}]}),f({attribute:"int",type:"fixed",value:10})},M=s=>{const t=[...n.effects];t.splice(s,1),d({...n,effects:t})},w=y.filter(s=>!s.used),k=y.filter(s=>s.used),h=s=>{const t=S[s];return typeof t=="string"?t:(t==null?void 0:t.name)||s},T=()=>{l&&a({...l,effects:[...l.effects||[],{attribute:"int",type:"fixed",value:10}]})},z=s=>{if(l&&l.effects){const t=[...l.effects];t.splice(s,1),a({...l,effects:t})}},F=()=>{if(l&&N){const{id:s,createdAt:t,used:o,...c}=l;N(s,c),m(!1),a(null),u(null)}};return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"é“å…·ç³»ç»Ÿ"}),e.jsxs("div",{className:"group relative ml-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full border border-gray-400 flex items-center justify-center text-xs text-gray-400 cursor-help",children:"?"}),e.jsxs("div",{className:"absolute left-1/2 transform -translate-x-1/2 bottom-full mb-2 hidden group-hover:block w-80 bg-gray-800 text-white text-xs rounded py-2 px-3 z-10",children:[e.jsx("p",{children:"é“å…·åˆ†ä¸ºæ”¶è—å“ã€æ¶ˆè€—å“ã€è£…å¤‡ä¸‰ç§ã€‚"}),e.jsx("p",{className:"mt-1",children:'æ”¶è—å“å’Œè£…å¤‡éƒ½å¯ä»¥é€‰æ‹©"è£…å¤‡ä¸Šèº«"ã€"å–æ¶ˆè£…å¤‡"ï¼ˆäº’æ–¥é€‰æ‹©ï¼‰ï¼Œå¦‚æžœé€‰æ‹©è£…å¤‡ä¸Šèº«ï¼Œå°±å¯ä»¥äº«å—æ”¶è—å“å’Œè£…å¤‡çš„å¢žç›Šæ•ˆæžœã€‚å–æ¶ˆè£…å¤‡ï¼Œåˆ™å¢žç›Šæ•ˆæžœæ¶ˆå¤±ã€‚'}),e.jsx("p",{className:"mt-1",children:"è€Œæ¶ˆè€—å“ä½¿ç”¨æ‰ä¼šç”Ÿæ•ˆï¼Œç›´æŽ¥èŽ·å¾—å¢žç›Šæ•ˆæžœã€‚æ¶ˆè€—å“åœ¨ä½¿ç”¨åŽä¸¤å°æ—¶å†…å¯ä»¥æ’¤é”€ä½¿ç”¨ã€‚"})]})]})]}),e.jsx("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"æ·»åŠ é“å…·"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"æœªä½¿ç”¨é“å…·"}),w.length===0?e.jsx("p",{className:"text-gray-500",children:"æš‚æ— æœªä½¿ç”¨é“å…·"}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:w.map(s=>{const t=new Date(s.createdAt),C=Math.abs(new Date().getTime()-t.getTime())/(1e3*60*60)<24;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 text-center hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{u(s),m(!1),a(null)},children:[C&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-500 rounded-full"}),e.jsx("div",{className:"text-3xl mb-2",children:s.icon}),e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:s.name}),s.description&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.description}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${s.type==="equipment"?"bg-blue-100 text-blue-800":s.type==="consumable"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"}`,children:s.type==="equipment"?"è£…å¤‡":s.type==="consumable"?"æ¶ˆè€—å“":"æ”¶è—å“"})}),s.effects&&s.effects.length>0&&e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:s.effects.map((x,B)=>e.jsxs("div",{children:[h(x.attribute),": ",(x.type==="fixed","+"),x.value,x.type==="percentage"?"%":""]},B))}),s.type==="consumable"&&e.jsx("button",{className:"mt-2 w-full text-xs text-blue-600 hover:text-blue-800",onClick:x=>{x.stopPropagation(),j(s)},children:"ä½¿ç”¨"})]},s.id)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"å·²ä½¿ç”¨é“å…·"}),k.length===0?e.jsx("p",{className:"text-gray-500",children:"æš‚æ— å·²ä½¿ç”¨é“å…·"}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:k.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 text-center opacity-60",onClick:()=>{u(s),m(!1),a(null)},children:[e.jsx("div",{className:"text-3xl mb-2 grayscale",children:s.icon}),e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:s.name}),s.description&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.description}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${s.type==="equipment"?"bg-blue-100 text-blue-800":s.type==="consumable"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"}`,children:s.type==="equipment"?"è£…å¤‡":s.type==="consumable"?"æ¶ˆè€—å“":"æ”¶è—å“"})}),s.effects&&s.effects.length>0&&e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:s.effects.map((t,o)=>e.jsxs("div",{children:[h(t.attribute),": ",(t.type==="fixed","+"),t.value,t.type==="percentage"?"%":""]},o))}),s.type==="consumable"&&e.jsx("button",{className:"mt-2 w-full text-xs text-gray-600 hover:text-gray-800",onClick:t=>{t.stopPropagation();const o=new Date(s.usedAt||new Date);if(Math.abs(new Date().getTime()-o.getTime())/(1e3*60*60)>2){alert("è¶…è¿‡ä¸¤å°æ—¶ï¼Œæ— æ³•æ’¤é”€ä½¿ç”¨");return}v(s.id)},children:"æ’¤é”€ä½¿ç”¨"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"å·²ä½¿ç”¨"})]},s.id))})]}),D&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-10 sm:top-20 mx-auto p-4 sm:p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"æ·»åŠ æ–°é“å…·"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"åç§°"}),e.jsx("input",{type:"text",value:n.name,onChange:s=>d({...n,name:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"æè¿°"}),e.jsx("textarea",{value:n.description,onChange:s=>d({...n,description:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"å›¾æ ‡"}),e.jsx("input",{type:"text",value:n.icon,onChange:s=>d({...n,icon:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"è¾“å…¥emojiæˆ–å­—ç¬¦"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ç±»åž‹"}),e.jsxs("select",{value:n.type,onChange:s=>d({...n,type:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"equipment",children:"è£…å¤‡"}),e.jsx("option",{value:"consumable",children:"æ¶ˆè€—å“"}),e.jsx("option",{value:"trophy",children:"æ”¶è—å“"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"æ•ˆæžœ"}),e.jsx("button",{type:"button",onClick:L,className:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"æ·»åŠ æ•ˆæžœ"})]}),n.effects.length>0&&e.jsx("div",{className:"border border-gray-200 rounded-md p-3 space-y-2",children:n.effects.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:h(s.attribute)}),e.jsxs("span",{className:"ml-2",children:[(s.type==="fixed","+"),s.value,s.type==="percentage"?"%":" EXP"]})]}),e.jsx("button",{type:"button",onClick:()=>M(t),className:"text-red-600 hover:text-red-800",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t))}),n.effects.length===0&&e.jsx("p",{className:"text-gray-500 text-sm",children:"æš‚æ— æ•ˆæžœ"}),e.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"å±žæ€§"}),e.jsx("select",{value:i.attribute,onChange:s=>f({...i,attribute:s.target.value}),className:"mt-1 block w-full pl-3 pr-10 py-1 text-xs border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md",children:Object.entries(g).map(([s,t])=>e.jsx("option",{value:s,children:t.name},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"ç±»åž‹"}),e.jsxs("select",{value:i.type,onChange:s=>f({...i,type:s.target.value}),className:"mt-1 block w-full pl-3 pr-10 py-1 text-xs border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md",children:[e.jsx("option",{value:"fixed",children:"å›ºå®šå€¼"}),e.jsx("option",{value:"percentage",children:"ç™¾åˆ†æ¯”"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"æ•°å€¼"}),e.jsx("input",{type:"number",value:i.value,onChange:s=>f({...i,value:parseInt(s.target.value)||0}),className:"mt-1 block w-full px-2 py-1 text-xs border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md"})]})]})]})]}),e.jsxs("div",{className:"mt-5 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{p(!1),d({name:"",description:"",icon:"ðŸŽ",type:"consumable",effects:[]})},className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50",children:"å–æ¶ˆ"}),e.jsx("button",{onClick:q,className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"æ·»åŠ "})]})]})})}),r&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-10 sm:top-20 mx-auto p-4 sm:p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"é“å…·è¯¦æƒ…"}),e.jsx("button",{onClick:()=>{u(null),m(!1),a(null)},className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r&&e.jsx(e.Fragment,{children:I&&l?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"åç§°"}),e.jsx("input",{type:"text",value:l.name,onChange:s=>a({...l,name:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"æè¿°"}),e.jsx("textarea",{value:l.description,onChange:s=>a({...l,description:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"å›¾æ ‡"}),e.jsx("input",{type:"text",value:l.icon,onChange:s=>a({...l,icon:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ç±»åž‹"}),e.jsxs("select",{value:l.type,onChange:s=>a({...l,type:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"equipment",children:"è£…å¤‡"}),e.jsx("option",{value:"consumable",children:"æ¶ˆè€—å“"}),e.jsx("option",{value:"trophy",children:"æ”¶è—å“"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"æ•ˆæžœ"}),e.jsx("button",{type:"button",onClick:T,className:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"æ·»åŠ æ•ˆæžœ"})]}),l.effects&&l.effects.length>0&&e.jsx("div",{className:"border border-gray-200 rounded-md p-3 space-y-2",children:l.effects.map((s,t)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("select",{value:s.attribute,onChange:o=>{const c=[...l.effects];c[t].attribute=o.target.value,a({...l,effects:c})},className:"flex-1 px-2 py-1 text-xs border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded",children:Object.entries(g).map(([o,c])=>e.jsx("option",{value:o,children:c.name},o))}),e.jsxs("select",{value:s.type,onChange:o=>{const c=[...l.effects];c[t].type=o.target.value,a({...l,effects:c})},className:"px-2 py-1 text-xs border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded",children:[e.jsx("option",{value:"fixed",children:"å›ºå®šå€¼"}),e.jsx("option",{value:"percentage",children:"ç™¾åˆ†æ¯”"})]}),e.jsx("input",{type:"number",value:s.value,onChange:o=>{const c=[...l.effects];c[t].value=parseInt(o.target.value)||0,a({...l,effects:c})},className:"w-16 px-2 py-1 text-xs border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded"}),e.jsx("button",{type:"button",onClick:()=>z(t),className:"text-red-600 hover:text-red-800",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t))}),(!l.effects||l.effects.length===0)&&e.jsx("p",{className:"text-gray-500 text-sm",children:"æš‚æ— æ•ˆæžœ"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{m(!1),a(null)},className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50",children:"å–æ¶ˆ"}),e.jsx("button",{onClick:F,className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"ä¿å­˜"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center text-4xl mb-2",children:r.icon}),e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:r.name}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium ${r.type==="equipment"?"bg-blue-100 text-blue-800":r.type==="consumable"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"}`,children:r.type==="equipment"?"è£…å¤‡":r.type==="consumable"?"æ¶ˆè€—å“":"æ”¶è—å“"})})]}),r.description&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-1",children:"æè¿°"}),e.jsx("p",{className:"text-gray-600",children:r.description})]}),r.effects&&r.effects.length>0&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:"æ•ˆæžœ"}),e.jsx("div",{className:"space-y-1",children:r.effects.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:h(s.attribute)}),e.jsxs("span",{className:"font-medium",children:[(s.type==="fixed","+"),s.value,s.type==="percentage"?"%":""]})]},t))})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-1",children:"åˆ›å»ºæ—¶é—´"}),e.jsx("p",{className:"text-gray-600",children:new Date(r.createdAt).toLocaleString("zh-CN")})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{a({...r}),m(!0)},className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50",children:"ç¼–è¾‘"}),r.type==="consumable"&&!r.used&&e.jsx("button",{onClick:()=>{j(r),u(null)},className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"ä½¿ç”¨"}),r.type==="consumable"&&r.used&&e.jsx("button",{onClick:()=>{v(r.id),u(null)},className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md shadow-sm text-white bg-gray-600 hover:bg-gray-700",children:"æ’¤é”€ä½¿ç”¨"})]})]})})]})})})]})}export{R as default};
