import{A as b,g as h,j as e,a as u,D as p}from"./index-ff32a15b.js";function N({attributeKey:n,attribute:l}){try{const r=b[n];if(!r)return console.error(`Unknown attribute key: ${n}`),null;const d=h(l.level+1),a=h(l.level),x=(l.exp-a)/(d-a)*100;return e.jsxs("div",{className:"card attribute-card","data-name":"attribute-card","data-file":"components/AttributeCard.js",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center relative",style:{backgroundColor:`${r.color}15`},children:[e.jsx("div",{className:`icon-${r.icon} text-xl`,style:{color:r.color}}),e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold text-white",style:{backgroundColor:r.color},children:l.level})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-[var(--text-primary)]",children:r.name}),e.jsxs("p",{className:"text-lg font-bold",style:{color:r.color},children:["Lv.",l.level]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:r.color},children:l.exp}),e.jsx("div",{className:"text-xs text-[var(--text-muted)]",children:"EXP"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-[var(--text-secondary)]",children:"距下一级"}),e.jsxs("span",{className:"text-[var(--text-secondary)]",children:[l.exp-a," / ",d-a," EXP"]})]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${Math.min(x,100)}%`,backgroundColor:r.color}})})]})]})}catch(r){return console.error("AttributeCard component error:",r),null}}const f={int:"智力",str:"体魄",vit:"精力",cha:"社交",eq:"情感",cre:"创造"},y={int:"🧠",str:"💪",vit:"⚡",cha:"👥",eq:"❤️",cre:"🎨"};function C({attributes:n,achievements:l,selectedTitles:r,onTitleChange:d}){const a={int:{name:"智力",icon:"book-open",color:"var(--int-color)"},str:{name:"体魄",icon:"dumbbell",color:"var(--str-color)"},vit:{name:"精力",icon:"battery",color:"var(--vit-color)"},cha:{name:"社交",icon:"users",color:"var(--cha-color)"},eq:{name:"情感",icon:"heart",color:"var(--eq-color)"},cre:{name:"创造",icon:"palette",color:"var(--cre-color)"}},x=u(l),j=(s,c)=>{const t=[...r],i=t.indexOf(s),g=t.filter(m=>{var o;return((o=l.find(v=>v.id===m))==null?void 0:o.attributeRequirement)===c});i>=0?t.splice(i,1):(g.forEach(m=>{const o=t.indexOf(m);o>=0&&t.splice(o,1)}),t.push(s)),d(t)};return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"人生六项基本属性"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(n).map(([s,c])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx(N,{attributeKey:s,attribute:c},s),x[s].length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"称号选择"}),e.jsx("div",{className:"space-y-2",children:x[s].map(t=>{const i=r.includes(t.id);return e.jsxs("div",{className:`flex items-center justify-between p-2 rounded cursor-pointer ${i?"bg-blue-50 border border-blue-200":"bg-gray-50 hover:bg-gray-100"}`,onClick:()=>j(t.id,s),children:[e.jsx("span",{className:"text-sm",children:t.title}),i&&e.jsx("svg",{className:"h-4 w-4 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},t.id)})})]})]},s))}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"周期触发事件"}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-yellow-800 mb-3",children:"以下是你需要定期维护的属性，如果超过指定天数未进行相关活动，属性经验值将会衰减："}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(p).map(([s,c])=>e.jsxs("div",{className:"flex items-start p-3 bg-white rounded-lg border border-gray-200",children:[e.jsx("span",{className:"text-lg mr-2",children:y[s]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:f[s]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["超过 ",e.jsxs("span",{className:"font-semibold text-gray-900",children:[c.inactiveThreshold,"天"]})," 未活动，每天衰减 ",e.jsxs("span",{className:"font-semibold text-gray-900",children:[(c.decayRate*100).toFixed(1),"%"]})," 当前经验值"]})]})]},s))}),e.jsx("div",{className:"mt-3 text-sm text-yellow-700",children:e.jsx("p",{children:"💡 提示：定期进行各类活动可以保持你的属性值稳定增长，避免衰减。"})})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"属性说明"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(a).map(([s,c])=>e.jsxs("div",{className:"flex items-start p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-white font-bold mr-3",style:{backgroundColor:c.color},children:c.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:c.name}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[s==="int"&&"学习能力、逻辑思维、知识积累",s==="str"&&"身体素质、运动能力、耐力",s==="vit"&&"精神状态、活力、专注力",s==="cha"&&"人际关系、沟通能力、领导力",s==="eq"&&"情绪管理、同理心、自我认知",s==="cre"&&"创新能力、艺术表达、想象力"]})]})]},s))})]})]})}export{C as default};
