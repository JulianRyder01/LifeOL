import{j as t}from"./index-c5f90abf.js";const y=({events:c,projectEvents:o,achievements:p,items:x,attributeNames:g,onReturn:a})=>{const h=s=>{const i=new Date(s),n=new Date().getTime()-i.getTime(),r=Math.floor(n/(1e3*60)),e=Math.floor(n/(1e3*60*60)),d=Math.floor(n/(1e3*60*60*24));return r<1?"åˆšåˆš":r<60?`${r}åˆ†é’Ÿå‰`:e<24?`${e}å°æ—¶å‰`:d<7?`${d}å¤©å‰`:`${i.toLocaleDateString("zh-CN")} ${i.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})}`},m=(()=>{const s=c.map(e=>({...e,type:"event",displayTitle:e.title,displayDescription:e.description})),i=o.filter(e=>e.progress>=100).map(e=>({id:`task-${e.id}`,title:`å®Œæˆä»»åŠ¡: ${e.title}`,description:`æˆåŠŸå®Œæˆäº†ä»»åŠ¡"${e.title}"`,timestamp:e.completedAt||e.createdAt,expGains:{},type:"task",displayTitle:`å®Œæˆä»»åŠ¡: ${e.title}`,displayDescription:`æˆåŠŸå®Œæˆäº†ä»»åŠ¡"${e.title}"`})),l=p.filter(e=>e.unlockedAt).map(e=>({id:`ach-${e.id}`,title:`è§£é”æˆå°±: ${e.title}`,description:e.description||"",timestamp:e.unlockedAt||new Date().toISOString(),expGains:{},type:"achievement",displayTitle:`è§£é”æˆå°±: ${e.title}`,displayDescription:e.description||""})),n=x.filter(e=>!e.used).map(e=>({id:`item-${e.id}`,title:`è·å¾—é“å…·: ${e.name}`,description:e.description||"",timestamp:e.createdAt,expGains:{},type:"item",displayTitle:`è·å¾—é“å…·: ${e.name}`,displayDescription:e.description||""}));return[...s,...i,...l,...n].sort((e,d)=>new Date(d.timestamp).getTime()-new Date(e.timestamp).getTime())})();return t.jsx("div",{className:"min-h-screen bg-gray-50",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"å…¨éƒ¨æ´»åŠ¨"}),t.jsx("button",{onClick:a,className:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"è¿”å›ä»ªè¡¨ç›˜"})]}),m.length>0?t.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:t.jsx("ul",{className:"divide-y divide-gray-200",children:m.map(s=>t.jsx("li",{className:"p-4 hover:bg-gray-50",children:t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full ${s.type==="event"?"bg-blue-100 text-blue-800":s.type==="task"?"bg-green-100 text-green-800":s.type==="achievement"?"bg-yellow-100 text-yellow-800":s.type==="item"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:s.type==="event"?"ğŸ“":s.type==="task"?"âœ…":s.type==="achievement"?"ğŸ†":s.type==="item"?"ğŸ":"ğŸ“Œ"}),t.jsx("h3",{className:"ml-3 text-sm font-medium text-gray-900 truncate",children:s.displayTitle})]}),s.displayDescription&&t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:s.displayDescription}),s.expGains&&Object.entries(s.expGains).some(([i,l])=>l>0)&&t.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:Object.entries(s.expGains).map(([i,l])=>l>0?t.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[i==="int"&&"ğŸ§ ",i==="str"&&"ğŸ’ª",i==="vit"&&"âš¡",i==="cha"&&"ğŸ‘¥",i==="eq"&&"â¤ï¸",i==="cre"&&"ğŸ¨",t.jsxs("span",{className:"ml-1",children:[g[i]||i,": +",l," EXP"]})]},i):null)})]}),t.jsx("div",{className:"ml-4 flex-shrink-0",children:t.jsx("p",{className:"text-sm text-gray-500",children:h(s.timestamp)})})]})},s.id))})}):t.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[t.jsx("div",{className:"text-gray-400 mb-4",children:"æš‚æ— æ´»åŠ¨è®°å½•"}),t.jsx("button",{onClick:a,className:"px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"è¿”å›ä»ªè¡¨ç›˜"})]})]})})};export{y as default};
