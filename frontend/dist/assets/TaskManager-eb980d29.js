import{r as n,j as e}from"./index-0a664690.js";const K=({value:c,className:A})=>{const[P,C]=n.useState(c),v=n.useRef(c);return n.useEffect(()=>{const N=v.current;if(N!==c){const S=performance.now(),T=500,R=x=>{const j=x-S,h=Math.min(j/T,1),y=1-Math.pow(1-h,3),b=Math.floor(N+(c-N)*y);C(b),h<1&&requestAnimationFrame(R)};requestAnimationFrame(R)}v.current=c},[c]),e.jsxs("span",{className:A,children:[P,"%"]})},g={int:{name:"智识",icon:"book-open",color:"var(--int-color)"},phy:{name:"体魄",icon:"dumbbell",color:"var(--str-color)"},wil:{name:"意志",icon:"battery",color:"var(--vit-color)"},cha:{name:"魅力",icon:"users",color:"var(--cha-color)"},men:{name:"心境",icon:"heart",color:"var(--eq-color)"},cre:{name:"创造",icon:"palette",color:"var(--cre-color)"}};function le({projectEvents:c,items:A,onAddProjectEvent:P,onUpdateProjectEvent:C,onCompleteProjectEvent:v,onDeleteProjectEvent:N,onResetProjectEvent:S,onEditProjectEvent:T,attributeNames:R={}}){const[x,j]=n.useState(!1),[h,y]=n.useState(null),[b,$]=n.useState(null),[D,Q]=n.useState({}),[w,F]=n.useState({}),[re,W]=n.useState({}),[a,u]=n.useState({title:"",description:"",useMarkdown:!1,progress:0,attributeRewards:{},itemRewards:[],customProgressButtons:[{label:"-50%",value:-50},{label:"-20%",value:-20},{label:"-10%",value:-10},{label:"-5%",value:-5},{label:"+5%",value:5},{label:"+10%",value:10},{label:"+20%",value:20},{label:"+50%",value:50},{label:"标记完成✔",value:100}]}),[l,p]=n.useState({title:"",description:"",useMarkdown:!1,progress:0,customProgressButtons:[],attributeRewards:{}}),[k,B]=n.useState([]);({...g,...R});const[d,M]=n.useState({attribute:"int",exp:50}),L=()=>{x?u({...a,attributeRewards:{...a.attributeRewards,[d.attribute]:(a.attributeRewards[d.attribute]||0)+d.exp}}):b&&p({...l,attributeRewards:{...l.attributeRewards,[d.attribute]:(l.attributeRewards[d.attribute]||0)+d.exp}})},V=s=>{if(x){const t={...a.attributeRewards};delete t[s],u({...a,attributeRewards:t})}else if(b){const t={...l.attributeRewards};delete t[s],p({...l,attributeRewards:t})}},X=()=>{a.title.trim()&&(P(a),u({title:"",description:"",useMarkdown:!1,progress:0,attributeRewards:{},itemRewards:[],customProgressButtons:[{label:"-50%",value:-50},{label:"-20%",value:-20},{label:"-10%",value:-10},{label:"-5%",value:-5},{label:"+5%",value:5},{label:"+10%",value:10},{label:"+20%",value:20},{label:"+50%",value:50},{label:"标记完成✔",value:100}]}),j(!1))},q=(s,t=!1)=>t?e.jsx("div",{className:"markdown-content",children:s.split(`
`).map((r,o)=>e.jsx("p",{className:"mb-2",children:r.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").split(/(<strong>.*?<\/strong>|<em>.*?<\/em>|<code>.*?<\/code>)/g).map((i,m)=>i.startsWith("<strong>")&&i.endsWith("</strong>")?e.jsx("strong",{children:i.slice(8,-9)},m):i.startsWith("<em>")&&i.endsWith("</em>")?e.jsx("em",{children:i.slice(4,-5)},m):i.startsWith("<code>")&&i.endsWith("</code>")?e.jsx("code",{children:i.slice(6,-7)},m):i)},o))}):s,Z=s=>{const t=c.find(r=>r.id===s);t&&y({id:s,title:t.title})},_=s=>{N(s),y(null)},[O,z]=n.useState({}),U=n.useCallback((s,t,r)=>{const o=c.find(i=>i.id===s);if(o){const i=Math.max(0,Math.min(100,o.progress+t));C(s,i,r),i>=100&&o.progress<100&&(F(m=>({...m,[s]:!0})),setTimeout(()=>{c.find(f=>f.id===s)&&(v(s),setTimeout(()=>{F(f=>{const J={...f};return delete J[s],J})},100))},1e3)),z(m=>({...m,[s]:"progress-change"})),setTimeout(()=>{z(m=>{const f={...m};return delete f[s],f})},1e3)}},[c,C,v]),E=s=>{$(s.id),p({title:s.title,description:s.description||"",useMarkdown:s.useMarkdown||!1,progress:s.progress,customProgressButtons:s.customProgressButtons||[{label:"-50%",value:-50},{label:"-20%",value:-20},{label:"-10%",value:-10},{label:"-5%",value:-5},{label:"+5%",value:5},{label:"+10%",value:10},{label:"+20%",value:20},{label:"+50%",value:50},{label:"标记完成✔",value:100}],attributeRewards:s.attributeRewards||{}}),B(s.customProgressButtons||[{label:"-50%",value:-50},{label:"-20%",value:-20},{label:"-10%",value:-10},{label:"-5%",value:-5},{label:"+5%",value:5},{label:"+10%",value:10},{label:"+20%",value:20},{label:"+50%",value:50},{label:"标记完成✔",value:100}])},ee=s=>{T(s,{title:l.title,description:l.description,useMarkdown:l.useMarkdown,progress:l.progress,customProgressButtons:k,attributeRewards:l.attributeRewards}),$(null)},se=()=>{$(null)},I=()=>{x?u({...a,customProgressButtons:[...a.customProgressButtons,{label:"+10%",value:10}]}):b&&B([...k,{label:"+10%",value:10}])},Y=(s,t,r)=>{const o=[...k];o[s][t]=r,x?u({...a,customProgressButtons:o}):b&&B(o)},te=s=>{const t=[...k];t.splice(s,1),x?u({...a,customProgressButtons:t}):b&&B(t)};n.useEffect(()=>{Object.keys(w).forEach(s=>{w[s]&&(W(t=>({...t,[s]:{progress:100,opacity:1,transform:"translateY(0)"}})),setTimeout(()=>{W(t=>{const r={...t};return r[s]&&(r[s]={...r[s],opacity:.5,transform:"translateY(20px)"}),r})},50))})},[w]);const G=c.filter(s=>s.progress<100||w[s.id]),H=c.filter(s=>s.progress>=100&&!w[s.id]);return e.jsxs("div",{className:"card","data-name":"task-manager","data-file":"components/TaskManager.js",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"icon-tasks text-lg text-[var(--primary-color)]"}),e.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"进行中的任务"})]}),e.jsx("button",{onClick:()=>j(!0),className:"btn btn-primary px-3 py-1.5 text-sm sm:px-4 sm:py-2",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"icon-plus text-sm"}),e.jsx("span",{children:"添加任务"})]})})]}),x&&e.jsxs("div",{className:"mb-6 p-4 border border-[var(--border-color)] rounded-lg bg-[var(--card-bg)]",children:[e.jsx("h3",{className:"font-medium mb-3",children:"添加新任务"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"任务名称",value:a.title,onChange:s=>u({...a,title:s.target.value}),className:"w-full px-3 py-2 border border-[var(--border-color)] rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-[var(--text-primary)]",children:"任务描述（可选）"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"task-markdown",checked:a.useMarkdown,onChange:s=>u({...a,useMarkdown:s.target.checked}),className:"h-4 w-4 text-blue-600 rounded"}),e.jsx("label",{htmlFor:"task-markdown",className:"ml-1 text-sm text-gray-600",children:"使用Markdown"})]})]}),e.jsx("textarea",{placeholder:"任务描述",value:a.description||"",onChange:s=>u({...a,description:s.target.value}),className:"w-full px-3 py-2 border border-[var(--border-color)] rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]",rows:2}),a.useMarkdown&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"支持 **粗体**、*斜体*、`代码` 等基本Markdown语法"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx("input",{type:"number",placeholder:"初始进度",value:a.progress||"",onChange:s=>u({...a,progress:Number(s.target.value)||0}),className:"px-3 py-2 border border-[var(--border-color)] rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)] w-32",min:"0",max:"100"})}),e.jsxs("div",{className:"border-t border-[var(--border-color)] pt-3",children:[e.jsx("h4",{className:"text-sm font-medium text-[var(--text-primary)] mb-2",children:"任务奖励"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{className:"text-xs font-medium text-[var(--text-secondary)] mb-1",children:"属性奖励"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:Object.entries(a.attributeRewards).map(([s,t])=>e.jsxs("div",{className:"flex items-center bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs",children:[e.jsxs("span",{children:[g[s].name," +",t]}),e.jsx("button",{onClick:()=>V(s),className:"ml-1 text-blue-600 hover:text-blue-900",children:"×"})]},s))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{value:d.attribute,onChange:s=>M({...d,attribute:s.target.value}),className:"px-2 py-1 border border-[var(--border-color)] rounded text-sm focus:outline-none focus:ring-1 focus:ring-[var(--primary-color)]",children:Object.entries(g).map(([s,t])=>e.jsx("option",{value:s,children:t.name},s))}),e.jsx("input",{type:"number",value:d.exp,onChange:s=>M({...d,exp:Number(s.target.value)||0}),className:"w-20 px-2 py-1 border border-[var(--border-color)] rounded text-sm focus:outline-none focus:ring-1 focus:ring-[var(--primary-color)]",min:"1"}),e.jsx("button",{onClick:L,className:"px-2 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"添加"})]})]})]}),e.jsxs("div",{className:"border-t border-[var(--border-color)] pt-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-[var(--text-primary)]",children:"自定义进度按钮"}),e.jsx("button",{onClick:I,className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded hover:bg-blue-200",children:"添加按钮"})]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:a.customProgressButtons.map((s,t)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"text",value:s.label,onChange:r=>{const o=[...a.customProgressButtons];o[t].label=r.target.value,u({...a,customProgressButtons:o})},placeholder:"按钮标签",className:"flex-1 px-2 py-1 text-sm border border-[var(--border-color)] rounded focus:outline-none focus:ring-1 focus:ring-[var(--primary-color)]"}),e.jsx("input",{type:"number",value:s.value,onChange:r=>{const o=[...a.customProgressButtons];o[t].value=Number(r.target.value)||0,u({...a,customProgressButtons:o})},placeholder:"值",className:"w-20 px-2 py-1 text-sm border border-[var(--border-color)] rounded focus:outline-none focus:ring-1 focus:ring-[var(--primary-color)]"}),e.jsx("button",{onClick:()=>{const r=[...a.customProgressButtons];r.splice(t,1),u({...a,customProgressButtons:r})},className:"p-1 text-red-500 hover:text-red-700",children:e.jsx("div",{className:"icon-trash text-sm"})})]},t))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:X,className:"btn btn-primary px-4 py-2",children:"添加"}),e.jsx("button",{onClick:()=>j(!1),className:"btn btn-secondary px-4 py-2",children:"取消"})]})]})]}),G.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"icon-tasks text-4xl text-[var(--text-muted)] mb-4"}),e.jsx("p",{className:"text-[var(--text-secondary)]",children:"还没有进行中的任务"}),e.jsx("p",{className:"text-sm text-[var(--text-muted)] mt-1",children:'点击"添加任务"来创建你的第一个任务吧！'})]}):e.jsx("div",{className:"space-y-4",children:G.map(s=>e.jsx("div",{className:"border border-[var(--border-color)] rounded-lg p-4 hover:shadow-sm transition-shadow",children:b===s.id?e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",value:l.title,onChange:t=>p({...l,title:t.target.value}),className:"w-full px-3 py-2 border border-[var(--border-color)] rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-[var(--text-primary)]",children:"任务描述（可选）"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"edit-task-markdown",checked:l.useMarkdown,onChange:t=>p({...l,useMarkdown:t.target.checked}),className:"h-4 w-4 text-blue-600 rounded"}),e.jsx("label",{htmlFor:"edit-task-markdown",className:"ml-1 text-sm text-gray-600",children:"使用Markdown"})]})]}),e.jsx("textarea",{value:l.description,onChange:t=>p({...l,description:t.target.value}),className:"w-full px-3 py-2 border border-[var(--border-color)] rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)]",rows:2}),l.useMarkdown&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"支持 **粗体**、*斜体*、`代码` 等基本Markdown语法"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-[var(--text-secondary)]",children:"当前进度:"}),e.jsx("input",{type:"number",value:l.progress,onChange:t=>p({...l,progress:Number(t.target.value)||0}),className:"px-2 py-1 border border-[var(--border-color)] rounded-md focus:outline-none focus:ring-1 focus:ring-[var(--primary-color)] w-20",min:"0",max:"100"}),e.jsx("span",{className:"text-sm text-[var(--text-secondary)]",children:"%"})]}),e.jsxs("div",{className:"border-t border-[var(--border-color)] pt-3",children:[e.jsx("h4",{className:"text-sm font-medium text-[var(--text-primary)] mb-2",children:"任务奖励"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{className:"text-xs font-medium text-[var(--text-secondary)] mb-1",children:"属性奖励"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:Object.entries(l.attributeRewards).map(([t,r])=>e.jsxs("div",{className:"flex items-center bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs",children:[e.jsxs("span",{children:[g[t].name," +",r]}),e.jsx("button",{onClick:()=>V(t),className:"ml-1 text-blue-600 hover:text-blue-900",children:"×"})]},t))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{value:d.attribute,onChange:t=>M({...d,attribute:t.target.value}),className:"px-2 py-1 border border-[var(--border-color)] rounded text-sm focus:outline-none focus:ring-1 focus:ring-[var(--primary-color)]",children:Object.entries(g).map(([t,r])=>e.jsx("option",{value:t,children:r.name},t))}),e.jsx("input",{type:"number",value:d.exp,onChange:t=>M({...d,exp:Number(t.target.value)||0}),className:"w-20 px-2 py-1 border border-[var(--border-color)] rounded text-sm focus:outline-none focus:ring-1 focus:ring-[var(--primary-color)]",min:"1"}),e.jsx("button",{onClick:L,className:"px-2 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"添加"})]})]})]}),e.jsxs("div",{className:"border-t border-[var(--border-color)] pt-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-[var(--text-primary)]",children:"自定义进度按钮"}),e.jsx("button",{onClick:I,className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded hover:bg-blue-200",children:"添加按钮"})]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:k.map((t,r)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"text",value:t.label,onChange:o=>Y(r,"label",o.target.value),placeholder:"按钮标签",className:"flex-1 px-2 py-1 text-sm border border-[var(--border-color)] rounded focus:outline-none focus:ring-1 focus:ring-[var(--primary-color)]"}),e.jsx("input",{type:"number",value:t.value,onChange:o=>Y(r,"value",o.target.value),placeholder:"值",className:"w-20 px-2 py-1 text-sm border border-[var(--border-color)] rounded focus:outline-none focus:ring-1 focus:ring-[var(--primary-color)]"}),e.jsx("button",{onClick:()=>te(r),className:"p-1 text-red-500 hover:text-red-700",children:e.jsx("div",{className:"icon-trash text-sm"})})]},r))})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:se,className:"px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:"取消"}),e.jsx("button",{onClick:()=>ee(s.id),className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"保存"})]})]}):e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-2",children:[e.jsx("h3",{className:"font-medium text-purple-600 text-lg",children:s.title}),e.jsx(K,{value:s.progress,className:`text-3xl font-bold ${s.progress<25?"text-red-500":s.progress<50?"text-yellow-500":s.progress<80?"text-blue-500":s.progress<100?"text-purple-500":"text-green-500"} ${O[s.id]==="completed"?"animate-bounce":""}`})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${s.progress>=100?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:s.progress>=100?"已完成":"进行中"})}),s.description&&e.jsx("p",{className:"text-sm text-[var(--text-secondary)] mb-3",children:q(s.description,s.useMarkdown)}),e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${O[s.id]==="progress-change"?"transition duration-500 ease-in-out":""} ${s.progress<25?"bg-red-500":s.progress<50?"bg-yellow-500":s.progress<80?"bg-blue-500":s.progress<100?"bg-purple-500":"bg-green-500"} ${O[s.id]==="completed"?"animate-pulse bg-green-500":""}`,style:{width:`${s.progress}%`}})})}),s.attributeRewards&&Object.keys(s.attributeRewards).length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-xs font-medium text-[var(--text-secondary)] mb-1",children:"完成奖励:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(s.attributeRewards).map(([t,r])=>e.jsx("div",{className:"flex items-center bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs",children:e.jsxs("span",{children:[g[t].name," +",r]})},t))})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:(s.customProgressButtons||[{label:"-50%",value:-50},{label:"-20%",value:-20},{label:"-10%",value:-10},{label:"-5%",value:-5},{label:"+5%",value:5},{label:"+10%",value:10},{label:"+20%",value:20},{label:"+50%",value:50},{label:"标记完成✔",value:100}]).map((t,r)=>e.jsx("button",{onClick:()=>U(s.id,t.value,D[s.id]),className:`px-2 py-1 text-xs rounded ${t.value>0?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"}`,children:t.label},r))}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx("input",{type:"text",value:D[s.id]||"",onChange:t=>Q({...D,[s.id]:t.target.value}),placeholder:"变更原因（可选）",className:"flex-1 min-w-0 px-2 py-1 text-sm border border-[var(--border-color)] rounded focus:outline-none focus:ring-1 focus:ring-[var(--primary-color)]"})}),s.progressLog&&s.progressLog.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-[var(--border-color)]",children:[e.jsx("h4",{className:"text-xs font-medium text-[var(--text-secondary)] mb-2",children:"进度变更记录"}),e.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:s.progressLog.map((t,r)=>e.jsxs("div",{className:"text-xs text-[var(--text-secondary)]",children:[e.jsxs("span",{className:t.change>0?"text-green-600":"text-red-600",children:[t.change>0?"+":"",t.change,"%"]}),t.reason&&e.jsxs("span",{children:[" ",t.reason]}),e.jsxs("span",{className:"ml-1",children:[new Date(t.timestamp).toLocaleDateString("zh-CN")," ",new Date(t.timestamp).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})]})]},r))})]})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>E(s),className:"self-start p-1 text-gray-400 hover:text-blue-500",children:e.jsx("div",{className:"icon-settings text-lg"})}),e.jsx("button",{onClick:()=>Z(s.id),className:"self-start p-1 text-gray-400 hover:text-red-500",children:e.jsx("div",{className:"icon-trash text-lg"})})]})]})},s.id))}),H.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"icon-check-circle text-lg text-[var(--primary-color)]"}),e.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"已完成的任务"})]}),e.jsx("div",{className:"space-y-4",children:H.map(s=>e.jsx("div",{className:"border border-[var(--border-color)] rounded-lg p-4 bg-gray-50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-2",children:[e.jsx("h3",{className:"font-medium text-purple-600 text-lg",children:s.title}),e.jsx(K,{value:s.progress,className:"text-3xl font-bold text-green-500"})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"已完成"})}),s.description&&e.jsx("p",{className:"text-sm text-[var(--text-secondary)] mb-3",children:q(s.description,s.useMarkdown)}),e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full transition-all duration-300 bg-green-500",style:{width:`${s.progress}%`,backgroundImage:"linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent)"}})})}),s.attributeRewards&&Object.keys(s.attributeRewards).length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-xs font-medium text-[var(--text-secondary)] mb-1",children:"完成奖励:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(s.attributeRewards).map(([t,r])=>e.jsx("div",{className:"flex items-center bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs",children:e.jsxs("span",{children:[g[t].name," +",r]})},t))})]})]}),e.jsxs("button",{onClick:()=>S(s.id),className:"self-start px-3 py-1.5 text-sm bg-blue-100 text-blue-800 rounded-md hover:bg-blue-200 flex items-center gap-1",children:[e.jsx("div",{className:"icon-rotate-ccw text-sm"}),e.jsx("span",{children:"重新编排"})]})]})},s.id))})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-md shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"确认删除"}),e.jsxs("p",{className:"text-gray-500 mb-6",children:["确定要删除任务 ",e.jsx("span",{className:"font-medium text-gray-900",children:h.title})," 吗？ 此操作无法撤销。"]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>y(null),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"取消"}),e.jsx("button",{onClick:()=>_(h.id),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"删除"})]})]})})})]})}export{le as default};
