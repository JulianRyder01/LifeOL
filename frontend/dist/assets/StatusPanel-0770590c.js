import{A as x,g,j as e,a as b,b as j,D as N}from"./index-7bec8ce1.js";function f({attributeKey:n,attribute:t}){try{const l=x[n];if(!l)return console.error(`Unknown attribute key: ${n}`),null;const o=g(t.level+1),c=g(t.level),m=(t.exp-c)/(o-c)*100;return e.jsxs("div",{className:"card attribute-card","data-name":"attribute-card","data-file":"components/AttributeCard.js",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center relative",style:{backgroundColor:`${l.color}15`},children:[e.jsx("div",{className:`icon-${l.icon} text-xl`,style:{color:l.color}}),e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold text-white",style:{backgroundColor:l.color},children:t.level})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-[var(--text-primary)]",children:l.name}),e.jsxs("p",{className:"text-lg font-bold",style:{color:l.color},children:["Lv.",t.level]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:l.color},children:t.exp}),e.jsx("div",{className:"text-xs text-[var(--text-muted)]",children:"EXP"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-[var(--text-secondary)]",children:"距下一级"}),e.jsxs("span",{className:"text-[var(--text-secondary)]",children:[t.exp-c," / ",o-c," EXP"]})]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${Math.min(m,100)}%`,backgroundColor:l.color}})})]})]})}catch(l){return console.error("AttributeCard component error:",l),null}}function y({attributes:n,achievements:t,selectedTitles:l,onTitleChange:o}){const c=b(t),m=(s,a)=>{const r=[...l],d=r.indexOf(s),u=r.filter(h=>{var i;return((i=t.find(p=>p.id===h))==null?void 0:i.attributeRequirement)===a});d>=0?r.splice(d,1):(u.forEach(h=>{const i=r.indexOf(h);i>=0&&r.splice(i,1)}),r.push(s)),o(r)};return e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"人生六项基本属性"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(s=>{const a=n[s];return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx(f,{attributeKey:s,attribute:a},s),c[s]&&c[s].length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"称号选择"}),e.jsx("div",{className:"space-y-2",children:c[s].map(r=>{const d=l.includes(r.id);return e.jsxs("div",{className:`flex items-center p-2 rounded cursor-pointer ${d?"bg-blue-100 border border-blue-300":"hover:bg-gray-100 border border-transparent"}`,onClick:()=>m(r.id,s),children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:r.title}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:r.description})]}),d&&e.jsx("div",{className:"ml-2 flex-shrink-0",children:e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"已选中"})})]},r.id)})})]})]},s)})}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"周期触发事件"}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-yellow-800 mb-3",children:"以下是你需要定期维护的属性，如果超过指定天数未进行相关活动，属性经验值将会衰减："}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(N).map(([s,a])=>e.jsxs("div",{className:"flex items-start p-3 bg-white rounded-lg border border-gray-200",children:[e.jsx("span",{className:"text-lg mr-2",children:x[s].icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:x[s].name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["超过 ",e.jsxs("span",{className:"font-semibold text-gray-900",children:[a.inactiveThreshold,"天"]})," 未活动，每天衰减 ",e.jsxs("span",{className:"font-semibold text-gray-900",children:[(a.decayRate*100).toFixed(1),"%"]})," 当前经验值"]})]})]},s))}),e.jsx("div",{className:"mt-3 text-sm text-yellow-700",children:e.jsx("p",{children:"💡 提示：定期进行各类活动可以保持你的属性值稳定增长，避免衰减。"})})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"属性说明"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(s=>{const a=x[s];return e.jsxs("div",{className:"flex items-start p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-white font-bold mr-3",style:{backgroundColor:a.color},children:a.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:a.name}),e.jsx("p",{className:"text-sm text-gray-500 mt-1"})]})]},s)})})]})]})}export{y as default};
